import{E as k}from"./el-button-C0k8b0Uu.js";import{E as I}from"./el-pagination-D1tgt_kk.js";import{E as U}from"./el-input-Bl7HZI7a.js";import"./el-select-B6CuLMMT.js";import"./el-popper-BcKKSjAX.js";import{E as y,a as B}from"./el-table-column-BFe8cHpw.js";import"./el-tooltip-l0sNRNKZ.js";import{d as x,K as D,r as u,a as b,c as E,b as a,f as o,w as V,h as N,at as M,au as G,o as P,i as L,j as T,E as $,U as j,aa as A}from"./index-PF-Fl51z.js";import{h as w}from"./moment-Cl4UOzQZ.js";import{E as F}from"./el-date-picker-B0nW_AG2.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./flatten-D1jLvMYC.js";const h=c=>(M("data-v-0defe3d7"),c=c(),G(),c),K={class:"condition"},q={class:"line"},H={class:"inputGroup"},J=h(()=>a("span",{class:"label"},"操作人:",-1)),O={class:"inputGroup"},Q=h(()=>a("span",{class:"label"},"标题:",-1)),W={class:"inputGroup"},X=h(()=>a("span",{class:"label"},"内容:",-1)),Z={class:"line"},R=h(()=>a("span",{class:"label"},"时间:",-1)),ee={class:"buttonGroup"},te=x({__name:"condition",emits:["search"],setup(c,{emit:l}){const p=l,t=D({operatorName:"",title:"",content:""}),i=u([]);function _(){t.operatorName="",t.title="",t.content="",i.value=[]}function f(){p("search",t,i.value)}return(C,n)=>{const s=U,v=F,m=k;return b(),E("div",K,[a("div",q,[a("div",H,[J,o(s,{class:"input",modelValue:t.operatorName,"onUpdate:modelValue":n[0]||(n[0]=e=>t.operatorName=e),clearable:""},null,8,["modelValue"])]),a("div",O,[Q,o(s,{class:"input",modelValue:t.title,"onUpdate:modelValue":n[1]||(n[1]=e=>t.title=e),clearable:""},null,8,["modelValue"])]),a("div",W,[X,o(s,{class:"input",modelValue:t.content,"onUpdate:modelValue":n[2]||(n[2]=e=>t.content=e),clearable:""},null,8,["modelValue"])])]),a("div",Z,[a("div",null,[R,o(v,{class:"timeRange",modelValue:i.value,"onUpdate:modelValue":n[3]||(n[3]=e=>i.value=e),type:"daterange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束"},null,8,["modelValue"])])]),a("div",ee,[o(m,{class:"search",type:"primary",onClick:f},{default:V(()=>[N("查询")]),_:1}),o(m,{class:"reset",onClick:_},{default:V(()=>[N("重置")]),_:1})])])}}}),ae=z(te,[["__scopeId","data-v-0defe3d7"]]),oe={class:"log"},ne={class:"data"},le="total, sizes, prev, pager, next",se=x({__name:"index",setup(c){let l={operatorName:"",title:"",content:"",timeBegin:"",timeEnd:""};const p=u(1),t=u(10),i=u(0),_=u([]),f=[10,50,100,200],C=[{prop:"title",label:"操作类型",width:230,align:"left"},{prop:"content",label:"操作内容",align:"left"},{prop:"operator",label:"操作人",width:100,align:"center"},{prop:"ip",label:"操作人IP",width:100,align:"center"},{prop:"createdAt",label:"操作时间",width:200,align:"center"}];function n(e,r){l.operatorName=e.operatorName,l.title=e.title,l.content=e.content,l.timeBegin=r[0]?w(r[0]).format("YYYY-MM-DD"):"",l.timeEnd=r[1]?w(r[1]).format("YYYY-MM-DD"):"",s()}function s(){L.getUniversalLog({...l,pageNo:p.value,pageSize:t.value}).then(({code:e,msg:r,data:d})=>{if(e!=T.success){$({type:"error",message:"操作日志获取失败："+r});return}_.value=d.data,i.value=d.total})}function v(e){t.value=e,s()}function m(e){p.value=e,s()}return P(()=>{s()}),(e,r)=>{const d=B,S=y,Y=I;return b(),E("div",oe,[o(ae,{onSearch:n}),a("div",ne,[o(S,{class:"table",border:!0,data:_.value},{default:V(()=>[o(d,{type:"index",align:"center"}),(b(),E(j,null,A(C,g=>o(d,{prop:g.prop,label:g.label,width:g.width,align:g.align},null,8,["prop","label","width","align"])),64))]),_:1},8,["data"]),o(Y,{class:"pagination",layout:le,"page-sizes":f,"current-page":p.value,"page-size":t.value,total:i.value,onCurrentChange:m,onSizeChange:v},null,8,["current-page","page-size","total"])])])}}}),be=z(se,[["__scopeId","data-v-0961e529"]]);export{be as default};
